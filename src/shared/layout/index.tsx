import React, { FC, ReactNode, useState } from 'react';
import Head from 'next/head';

import { Header } from '@/shared/header';
import LogOutButton from '@/features/auth/ui/logOut/logOutButton';
import ModalWindow from '@/shared/modalWindow/modalWindow';
import { Button } from '@/shared/button/Button';
import { selectEmail, selectIsAuth, useAuthStore } from '@/features/auth/store';

type Props = {
    children: ReactNode
}
export const Layout: FC<Props> = ({ children }) => {

  const email = useAuthStore(selectEmail)

  const isAuth = useAuthStore(selectIsAuth)

  const [isActiveModal, setIsActiveModal] = useState(false)

  const logOutButtonHandler = (value: boolean) => setIsActiveModal(value)

  return (
    <>
      <Head>
        <meta name="description" content="Generated by create next app"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
      </Head>
      <Header>{isAuth && <LogOutButton callBack={logOutButtonHandler}/>}</Header>

      <ModalWindow isActive={isActiveModal} setIsActive={setIsActiveModal} title={'Log Out'}>
        <div>{`Are you really want to log out of your account ${email} ?`}
          <div style={{ display: 'flex', justifyContent: 'space-evenly', paddingTop: '30px' }}>
            <Button button_name={'Yes'} variant={'transparent'} button_handler={() => {
            }}/>
            <Button button_name={'No'} button_handler={() => {
              setIsActiveModal(false)
            }}/>
          </div>
        </div>
      </ModalWindow>

      <main>
        {children}
      </main>
    </>
  );
};
